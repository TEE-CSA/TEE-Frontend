<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background-color: rgb(0, 170, 255);
            font-family: Arial, sans-serif;
        }

        .text {
            text-align: right;
            color: white;
        }

        #track {
            position: relative;
            height: 400px;
            width: 130%;
            background-color: #5d5c5c;
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .race-car1, .race-car2, .race-car3, .race-car4 {
            position: absolute;
            top: 20px;
            width: 175px;
            height: 70px;
            margin: auto;
            transition: transform 4s linear;
        }

        .lane, .lane1 {
            height: 25%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            border-bottom: 2px solid #fff;
        }

        .lane1 {
            height: 25%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .finish {
            height: 400px;
            width: 50px;
            background-color: rgb(241, 35, 35);
            position: absolute;
            right: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .finish-text {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            color: white;
            font-size: 28px;
            transform: rotate(180deg);
        }

        .car-label {
            position: absolute;
            top: 30%; /* adjust the positioning as needed */
            left: -50px;
            text-align: center;
            width: 50px;
            color: white;
            font-size: 14px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        #speedForm {
            margin-top: 20px;
        }

        #speedForm label {
            display: block;
            margin-bottom: 5px;
        }

        #speedForm input {
            width: 50px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1 class="text">User Score: 0</h1>
    <h1 class="text">Amount Bet: 0</h1>

    <div id="track">
        <div class="lane">
            <span class="car-label" id="carLabel1">Merge Sort</span>
            <img class="race-car1" src="https://github.com/TEE-CSA/TEEBackend/assets/109186517/0fe7001f-0d2e-40fc-bdd1-9b82373862f5" alt="Car 1">
        </div>
        <div class="lane" style="top: 25%;">
            <span class="car-label" id="carLabel2">Insertion Sort</span>
            <img class="race-car2" src="https://github.com/TEE-CSA/TEEBackend/assets/109186517/6d9bc8e3-8c8e-4854-8194-0b5fdacad24b" alt="Car 2">
        </div>
        <div class="lane" style="top: 50%;">
            <span class="car-label" id="carLabel3">Bubble Sort</span>
            <img class="race-car3" src="https://github.com/TEE-CSA/TEEBackend/assets/109186517/3976c85c-ae57-43a0-9331-1e10bf51d29f" alt="Car 3">
        </div>
        <div class="lane1" style="top: 75%">
            <span class="car-label" id="carLabel4">Selection Sort</span>
            <img class="race-car4" src="https://github.com/TEE-CSA/TEEBackend/assets/109186517/7ad3a783-5957-4979-81c0-33619a9b4ef4" alt="Car 4">
        </div>
        <div class="finish">
            <span class="finish-text">Finish</span>
        </div>
    </div>

    <button id="startButton" onclick="startFibonacciRace()">Start Fibonacci Race</button>
    <button id="resetButton" onclick="resetRace()">Reset Race</button>

    <script>
        // asynchronous function to start the Fibonacci race
        async function startFibonacciRace() {
            // fetch sort speeds from the provided API endpoint
            const response = await fetch('http://localhost:8085/api/sort/speeds');
            const speeds = await response.json();
    
            // create an array of sort algorithms with their corresponding speeds
            const sortAlgorithms = [
                { algorithm: 'mergeSort', speed: speeds.mergeSort },
                { algorithm: 'insertionSort', speed: speeds.insertionSort },
                { algorithm: 'bubbleSort', speed: speeds.bubbleSort },
                { algorithm: 'selectionSort', speed: speeds.selectionSort },
            ];
            

            // move race cars to the finish line with timing based on their speeds
            sortAlgorithms.forEach((algorithm, index) => {
                const carSelector = `.race-car${index + 1}`;
                setTimeout(() => {
                    document.querySelector(carSelector).style.transform = `translateX(850%)`;
                }, 100 * (1 / algorithm.speed));
            });
        }
    
        // reset race 
        function resetRace() {
          
            document.querySelector('.race-car1').style.transform = `translateX(0)`;
            document.querySelector('.race-car2').style.transform = `translateX(0)`;
            document.querySelector('.race-car3').style.transform = `translateX(0)`;
            document.querySelector('.race-car4').style.transform = `translateX(0)`;
        }
    </script>
    
    
</body>
</html>